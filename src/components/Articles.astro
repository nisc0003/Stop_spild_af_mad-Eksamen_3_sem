---
import Heading from "../components/Heading.astro";
import Button from "../components/Button.astro";
import Text from "../components/Text.astro";
import Link from "../components/Link.astro";
---

<section
  class="flex flex-col gap-5 mb-section_buttom mt-section_top px-4 sm:px-6 lg:px-8 lg:mr-section_right lg:ml-section_left"
  id="articles-section"
>
  <Heading font="sans">LÆR MERE OMG KAMPEN IMOD MADSPILD</Heading>

  <section
    class="border border-black rounded-lg p-4 flex flex-col lg:flex-row gap-6"
  >
    <div
      class="w-full lg:w-1/2 aspect-video rounded-lg overflow-hidden bg-black relative"
    >
      <!-- BBC: Image + Play Button Container -->
      <div
        id="bbc_thumbnail_container"
        class="w-full h-full relative"
        data-media="bbc"
      >
        <img
          src="/img/bbc.webp"
          alt="BBC video thumbnail"
          id="bbc_vid"
          class="media-img w-full h-full object-cover cursor-pointer hover:brightness-110 transition-all"
          data-media="bbc"
        />
        <img
          src="/img/play_green.svg"
          alt="Afspil video"
          id="bbc_vid2"
          class="play-btn absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-16 h-16 cursor-pointer hover:scale-125 transition-all"
          data-media="bbc"
        />
      </div>

      <!-- BBC iframe -->
      <iframe
        id="bbc_video"
        src="https://www.youtube.com/embed/KlFNp88T2cA?si=_a686rnqOCrMVhRZ"
        title="YouTube video player"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
        referrerpolicy="strict-origin-when-cross-origin"
        allowfullscreen
        class="video hidden w-full h-full"
        data-media="bbc"
        style="border: none"></iframe>

      <!-- Other Media Images -->
      <img
        src="/img/dr.webp"
        alt="DR artikel billede"
        class="media-img hidden w-full h-full object-cover"
        data-media="dr"
      />
      <img
        src="/img/jp.webp"
        alt="Jyllands-Posten artikel billede"
        class="media-img hidden w-full h-full object-cover"
        data-media="jp"
      />
      <img
        src="/img/pol.webp"
        alt="Politiken artikel billede"
        class="media-img hidden w-full h-full object-cover"
        data-media="pol"
      />
      <img
        src="/img/tv2.webp"
        alt="TV2 News artikel billede"
        class="media-img hidden w-full h-full object-cover"
        data-media="tv2"
      />
      <img
        src="/img/huff.webp"
        alt="Huffington Post artikel billede"
        class="media-img hidden w-full h-full object-cover"
        data-media="huff"
      />
    </div>

    <div class="w-full lg:w-1/2 flex items-center justify-center">
      <!-- BBC Content -->
      <div class="media-text flex flex-col gap-4 px-2" data-media="bbc">
        <Heading htmlheading="h2" font="sans" size="small">BBC</Heading>
        <Heading font="sans" htmlheading="h2" size="medium"
          >HOW ONE WOMAN IS WINNING THE FIGHT AGAINST FOOD WASTE
        </Heading>
        <Text>27. februar 2017</Text>
        <Link> LÆS ARTIKLEN </Link>
      </div>

      <!-- DR Content -->
      <div class="media-text hidden flex-col gap-4 px-2" data-media="dr">
        <Heading font="sans" htmlheading="h2" size="small">DR</Heading>
        <Heading font="sans" htmlheading="h2" size="medium"
          >10.000 FATTIGE DANSKERE FÅR JULEMAD FRA SUPERMARKEDER
        </Heading>
        <Text>19. december 2016</Text>
        <Link> LÆS ARTIKLEN </Link>
      </div>

      <!-- JP Content -->
      <div class="media-text hidden flex-col gap-4 px-2" data-media="jp">
        <Heading font="sans" htmlheading="h2" size="small"
          >JYLLANDS-POSTEN</Heading
        >
        <Heading font="sans" htmlheading="h2" size="medium"
          >10.000 VIDENCENTER VIL BEKÆMPE MADSPILD MED NY HJEMMESIDE
        </Heading>
        <Text>8. august 2016</Text>
        <Link> LÆS ARTIKLEN </Link>
      </div>

      <!-- Politiken Content -->
      <div class="media-text hidden flex-col gap-4 px-2" data-media="pol">
        <Heading font="sans" htmlheading="h2" size="small">POLITIKEN</Heading>
        <Heading font="sans" htmlheading="h2" size="medium"
          >MADSPILDS-AKTIVIST: PRIVATE ER STADIG DE STØRSTE SYNDERE
        </Heading>
        <Text>16. marts 2017</Text>
        <Link> LÆS ARTIKLEN </Link>
      </div>

      <!-- TV2 Content -->
      <div class="media-text hidden flex-col gap-4 px-2" data-media="tv2">
        <Heading font="sans" htmlheading="h2" size="small">TV2 NEWS</Heading>
        <Heading font="sans" htmlheading="h2" size="medium"
          >SÅDAN UNDGÅR DU MADSPILD</Heading
        >
        <Text>3. marts 2017</Text>
        <Link> LÆS ARTIKLEN </Link>
      </div>

      <!-- Huffington Post Content -->
      <div class="media-text hidden flex-col gap-4 px-2" data-media="huff">
        <Heading font="sans" htmlheading="h2" size="small"
          >THE HUFFINGTON POST</Heading
        >
        <Heading font="sans" htmlheading="h2" size="medium"
          >THE FIGHT AGAINST FOOD WASTE IS BECOMING BIG BUSSINESS
        </Heading>
        <Text>14. februar 2017</Text>
        <Link> LÆS ARTIKLEN </Link>
      </div>
    </div>
  </section>

  <section
    class="flex flex-row justify-start lg:justify-start gap-3 flex-wrap lg:flex-nowrap lg:overflow-x-auto mt-6"
  >
    <button
      data-btn="bbc"
      class="btn-media btn-active bg-(--color-green--400) text-(--color-green--100) text-[0.875rem] md:text-[1rem] lg:text-[1.125rem] font-semibold uppercase px-6 py-3 rounded-CTA transition-all duration-300 hover:bg-(--color-green--100) hover:text-black whitespace-nowrap shrink-0"
      >BBC</button
    >
    <button
      data-btn="dr"
      class="btn-media bg-(--color-green--200) text-black text-[0.875rem] md:text-[1rem] lg:text-[1.125rem] font-semibold uppercase px-6 py-3 rounded-CTA transition-all duration-300 hover:bg-(--color-green--100) hover:text-black whitespace-nowrap shrink-0"
      >DR</button
    >
    <button
      data-btn="jp"
      class="btn-media bg-(--color-green--200) text-black text-[0.875rem] md:text-[1rem] lg:text-[1.125rem] font-semibold uppercase px-6 py-3 rounded-CTA transition-all duration-300 hover:bg-(--color-green--100) hover:text-black whitespace-nowrap shrink-0"
      >JYLLANDS-POSTEN</button
    >
    <button
      data-btn="pol"
      class="btn-media bg-(--color-green--200) text-black text-[0.875rem] md:text-[1rem] lg:text-[1.125rem] font-semibold uppercase px-6 py-3 rounded-CTA transition-all duration-300 hover:bg-(--color-green--100) hover:text-black whitespace-nowrap shrink-0"
      >POLITIKEN</button
    >
    <button
      data-btn="tv2"
      class="btn-media bg-(--color-green--200) text-black text-[0.875rem] md:text-[1rem] lg:text-[1.125rem] font-semibold uppercase px-6 py-3 rounded-CTA transition-all duration-300 hover:bg-(--color-green--100) hover:text-black whitespace-nowrap shrink-0"
      >TV2 NEWS</button
    >
    <button
      data-btn="huff"
      class="btn-media bg-(--color-green--200) text-black text-[0.875rem] md:text-[1rem] lg:text-[1.125rem] font-semibold uppercase px-6 py-3 rounded-CTA transition-all duration-300 hover:bg-(--color-green--100) hover:text-black whitespace-nowrap shrink-0"
      >THE HUFFINGTON POST</button
    >
  </section>
</section>

<style>
  /* Styles moved to inline classes */
</style>

<script is:inline>
  document.addEventListener("DOMContentLoaded", function () {
    const bbcThumbnailContainer = document.getElementById(
      "bbc_thumbnail_container",
    );
    const bbcThumbnail = document.getElementById("bbc_vid");
    const bbcPlayBTN = document.getElementById("bbc_vid2");
    const bbcVideo = document.getElementById("bbc_video");

    const showBBCVideo = () => {
      if (!bbcThumbnailContainer || !bbcVideo) return;
      bbcThumbnailContainer.classList.add("hidden");
      bbcVideo.classList.remove("hidden");
    };

    if (bbcThumbnail) {
      bbcThumbnail.addEventListener("click", showBBCVideo);
      bbcThumbnail.setAttribute("role", "button");
      bbcThumbnail.setAttribute("tabindex", "0");
      bbcThumbnail.setAttribute("aria-label", "Afspil BBC-video");
    }
    if (bbcPlayBTN) {
      bbcPlayBTN.addEventListener("click", showBBCVideo);
    }

    // Media switching functionality
    const mediaButtons = document.querySelectorAll(".btn-media");
    const allMediaTexts = document.querySelectorAll(".media-text");
    const allMediaImages = document.querySelectorAll(".media-img");

    mediaButtons.forEach((button) => {
      button.addEventListener("click", function () {
        const mediaKey = this.getAttribute("data-btn");

        // Hide all media content
        allMediaTexts.forEach((text) => {
          text.classList.remove("flex");
          text.classList.add("hidden");
        });
        allMediaImages.forEach((img) => {
          img.classList.add("hidden");
        });
        if (bbcVideo) bbcVideo.classList.add("hidden");
        if (bbcThumbnailContainer)
          bbcThumbnailContainer.classList.add("hidden");

        // Reset all buttons
        mediaButtons.forEach((btn) => {
          btn.classList.remove(
            "bg-[var(--color-green--400)]",
            "text-[var(--color-green--100)]",
          );
          btn.classList.add(
            "bg-[var(--color-green--200)]",
            "text-[var(--color-black)]",
          );
        });

        // Set clicked button to active
        this.classList.remove(
          "bg-[var(--color-green--200)]",
          "text-[var(--color-black)]",
        );
        this.classList.add(
          "bg-[var(--color-green--400)]",
          "text-[var(--color-green--100)]",
        );

        // Show selected media
        const selectedText = document.querySelector(
          `[data-media="${mediaKey}"].media-text`,
        );
        const selectedImage = document.querySelector(
          `[data-media="${mediaKey}"].media-img`,
        );

        if (selectedText) {
          selectedText.classList.remove("hidden");
          selectedText.classList.add("flex");
        }

        if (mediaKey === "bbc") {
          if (bbcThumbnailContainer)
            bbcThumbnailContainer.classList.remove("hidden");
          bbcThumbnail.classList.remove("hidden");
        } else {
          if (selectedImage) selectedImage.classList.remove("hidden");
        }
      });
    });
  });
</script>
