---
import MainLayout from "../../layouts/MainLayout.astro";
import Heading from "../../components/Heading.astro";
import Text from "../../components/Text.astro";
import Link from "../../components/Link.astro";
import Button from "../../components/Button.astro";

// Data for alle cards
const cards = [
  {
    slug: "frivillig",
    title: "Bliv frivillig",
    image: "/img/frivillig.webp",
    subtitle: "Lær at lave lækre retter med restmad",
    textfield1:
      "Deltag i vores madlavningsworkshops hvor vi lærer dig hvordan du kan udnytte restmad til at lave fantastiske retter.",
    textfield2:
      "Vi afholder workshops både for begyndere og øvede kokke, hvor fokus er på kreativitet og bæredygtighed.",
    textfield3:
      "Alle ingredienser stilles til rådighed, og du får opskrifter med hjem.",
    list: [
      "Madlavningsteknikker",
      "Opskrifter på restmad",
      "Bæredygtig madlavning",
      "Gratis deltagelse",
    ],
    id: "frivillig",
    link: "/tilmeldt",
    mediaType: "video",
    mediaSrc: "/img/vids/TedX_2012.mp4",
  },
  {
    slug: "stoettemedlem",
    title: "Bliv støttemedlem",
    image: "/img/stoettemedlem.webp",
    subtitle: "Hjælp os ved vores mange events",
    textfield1:
      "Bliv frivillig og hjælp os med at sprede budskabet om madspild ved events rundt om i landet.",
    textfield2:
      "Som frivillig får du mulighed for at møde ligesindede, gøre en forskel og få værdifuld erfaring.",
    textfield3:
      "Vi holder events året rundt - både store og små arrangementer.",
    list: ["Festivaler", "Gadeevents", "Konferencer", "Workshops"],
    id: "stoettemedlem",
    link: "/tilmeldt",
    mediaType: "image",
    mediaSrc: "/img/aktivitet2.jpg",
  },
  {
    slug: "samarbejdspartner",
    title: "Bliv samarbejdspartner",
    image: "/img/samarbejdspartner.webp",
    subtitle: "Professionelle kokkekurser mod madspild",
    textfield1:
      "Tag på kokkekursus med professionelle kokke som lærer dig tricks til at minimere madspild i hverdagen.",
    textfield2:
      "Kurserne er hands-on og du får mulighed for at smage alle de lækre retter.",
    textfield3:
      "Perfekt til både privatpersoner og restauratører der vil lære mere.",
    list: [
      "Professionelle instruktører",
      "3 timers kursus",
      "Certifikat",
      "Netværk med andre",
    ],
    id: "samarbejdspartner",
    link: "/tilmeldt",
    mediaType: "image",
    mediaSrc: "/img/aktivitet3.jpg",
  },
  {
    slug: "erhvervspartner",
    title: "Bliv erhvervspartner",
    image: "/img/erhvervspartner.webp",
    subtitle: "Støt vores mærkningsordning",
    textfield1:
      "Vores mærkningsordning hjælper forbrugerne med at identificere produkter der er tæt på udløbsdato.",
    textfield2:
      "Ved at købe disse produkter hjælper du med at reducere madspild og spare penge.",
    textfield3:
      "Mærkningen findes i flere supermarkedskæder rundt om i landet.",
    list: [
      "Tilgængelig i Rema 1000",
      "Op til 50% rabat",
      "Friske varer",
      "Kvalitetssikret",
    ],
    id: "erhvervspartner",
    link: "/tilmeldt",
    mediaType: "image",
    mediaSrc: "/img/aktivitet4.jpg",
  },
  {
    slug: "spred-budskabet",
    title: "Spred budskabet",
    image: "/img/spred_budskab.webp",
    subtitle: "Hjælp med at distribuere overskudsmad",
    textfield1:
      "Vær med til at distribuere overskudsmad fra supermarkeder og restauranter til dem der har brug for det.",
    textfield2:
      "Vi samler madvarer ind der ellers ville blive smidt ud og sikrer at de kommer til gode formål.",
    textfield3: "Som frivillig bliver du en vigtig del af vores redningshold.",
    list: [
      "Fleksible vagter",
      "Meningsfuldt arbejde",
      "Fællesskab",
      "Gør en forskel",
    ],
    id: "spred-budskabet",
    link: "/tilmeldt",
    mediaType: "image",
    mediaSrc: "/img/aktivitet5.jpg",
  },
];

// getStaticPaths - bygger en side for hver slug
export function getStaticPaths() {
  return [
    { params: { slug: "frivillig" } },
    { params: { slug: "stoettemedlem" } },
    { params: { slug: "samarbejdspartner" } },
    { params: { slug: "erhvervspartner" } },
    { params: { slug: "spred-budskabet" } },
  ];
}

// Hent slug fra URL
const { slug } = Astro.params;

// Find det matchende card
const item = cards.find((card) => card.slug === slug);
---

<MainLayout title={item?.title || "Indhold findes ikke"}>
  <main class="container mx-auto p-4">
    {
      !item && (
        <div class="max-w-xl mx-auto text-center">
          <Heading htmlheading="h1" size="medium" stylingclasses="mb-4">
            Siden kunne ikke findes
          </Heading>

          <Text>
            Det indhold du leder efter findes ikke eller linket er forkert.
          </Text>

          <div class="mt-6">
            <Link href="/" variant="green">
              Tilbage til forsiden
            </Link>
          </div>
        </div>
      )
    }

    {
      item && (
        <>
          <div class="mb-6">
            <Link href="/bliv_aktiv" variant="textlink">
              ← Tilbage
            </Link>
          </div>

          <div class="mb-8 rounded-lg overflow-hidden shadow-lg">
            <img
              src={item.image}
              alt={item.title}
              class="w-full h-64 md:h-96 object-cover"
            />
          </div>

          <article class="max-w-3xl mx-auto">
            <Heading htmlheading="h1" size="large" stylingclasses="mb-4">
              {item.title}
            </Heading>

            {item.subtitle && (
              <Heading
                htmlheading="h2"
                size="small"
                stylingclasses="mb-6 text-gray-600"
              >
                {item.subtitle}
              </Heading>
            )}

            {item.textfield1 && (
              <Text stylingclasses="mb-4">{item.textfield1}</Text>
            )}

            {item.textfield2 && (
              <Text stylingclasses="mb-4">{item.textfield2}</Text>
            )}

            {item.textfield3 && (
              <Text stylingclasses="mb-6">{item.textfield3}</Text>
            )}

            {item.list && item.list.length > 0 && (
              <div class="my-8">
                <Heading htmlheading="h3" size="xsmall" stylingclasses="mb-4">
                  Hvad du får:
                </Heading>
                <ul class="list-disc pl-6 space-y-2">
                  {item.list.map((li) => (
                    <li>
                      <Text>{li}</Text>
                    </li>
                  ))}
                </ul>
              </div>
            )}

            {item.mediaType && item.mediaSrc && (
              <div class="my-8">
                {item.mediaType === "video" && (
                  <video width="100%" height="auto" controls class="rounded-lg">
                    <source src={item.mediaSrc} type="video/mp4" />
                    Din browser understøtter ikke video afspilning.
                  </video>
                )}
                {item.mediaType === "image" && (
                  <img
                    src={item.mediaSrc}
                    alt={item.title}
                    class="w-full rounded-lg"
                  />
                )}
                {item.mediaType === "iframe" && (
                  <iframe
                    src={item.mediaSrc}
                    width="100%"
                    height="500"
                    class="rounded-lg"
                    frameborder="0"
                    allowfullscreen
                  />
                )}
              </div>
            )}

            {item.link && (
              <div class="mt-8 text-center">
                <Link href={item.link} variant="green" size="large">
                  Tilmeld dig nu
                </Link>
              </div>
            )}
          </article>
        </>
      )
    }
  </main>
</MainLayout>
