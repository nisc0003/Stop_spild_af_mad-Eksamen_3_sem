---
import MainLayout from "../../layouts/MainLayout.astro";
import Heading from "../../components/Heading.astro";
import Text from "../../components/Text.astro";
import Link from "../../components/Link.astro";
import Button from "../../components/Button.astro";

// Data for alle cards
const cards = [
  {
    slug: "frivillig",
    title: "Bliv frivillig",
    image: "/img/frivillig.webp",
    imagesingle: "/img/frivillig_single.webp",
    subtitle: "Bliv en del af vores team",
    textfield1:
      "De frivillige er vores vigtigste ressource. Siden 2008 har Stop Spild Af Mad involveret over 500 frivillige fra hele Danmark i vores mange projekter, aktiviteter, events o.lign.",
    textfield2:
      "Vi afholder workshops både for begyndere og øvede kokke, hvor fokus er på kreativitet og Vi er interesseret i at høre fra frivillige over hele landet. Opgaver kan være alt fra at give en hånd ved vores mange events, hjælpe med at videreformilde god overskudsmad til socialt udsatte eller optræde som case i TV, radio, aviser og andre medier.",
    textfield3:
      "Hvis du er interesseret i at blive en del af vores engagerede team af Stop Spild Af Mad frivillige, kan du tilmelde dig via linket nedenfor.",
    id: "frivillig",
    link: "/tilmeldt",
    mediaType: "iframe",
    mediaSrc: "https://www.youtube.com/embed/qW3uiahCmgI?si=GT8Mwa1S7DoDE2Li",
  },
  {
    slug: "stoettemedlem",
    title: "Bliv støttemedlem",
    image: "/img/stoettemedlem.webp",
    imagesingle: "",
    subtitle: "HVAD INDEBÆRE DET?",
    textfield1:
      "Privatpersoner, erhvervsvirksomheder, kommuner, foreninger,  institutioner og organisationer kan blive støttemedlemmer af foreningen Stop Spild Af Mad, og derved aktivt støtte foreningen Stop Spild Af Mads arbejde i mod madspild.",
    textfield2:
      "Det er gratis at blive støttemedlem af foreningen Stop Spild Af Mad.",
    id: "stoettemedlem",
    link: "/tilmeldt",
    mediaType: "iframe",
    mediaSrc: "https://www.youtube.com/embed/2IGJcWp_y_I?si=CZxJNPZXGHqaYeSD",
  },
  {
    slug: "samarbejdspartner",
    title: "Bliv samarbejdspartner",
    image: "/img/samarbejdspartner.webp",
    imagesingle: "",
    subtitle: "Bliv vores samarbejdspartner",
    textfield1:
      "Som Danmarks mest toneangivende organisation mod madspild har Stop Spild Af Mad siden 2008 opbygget en bred vifte af tunge danske og internationale samarbejdspartnere, som støtter Stop Spild Af Mads projekter og aktiviteter - bl.a. Landbrug & Fødevarer, Nordisk Råd, EU, FN og mange andre. Sammen er vi endnu stærkere i kampen mod madspild.",
    textfield2:
      "Hvis du er interesseret i at indgå et samarbejde med Stop Spild Af Mad, kan du kontakte os via linket nedenfor.",
    id: "samarbejdspartner",
    link: "/tilmeldt",
    mediaType: "iframe",
    mediaSrc: "https://www.youtube.com/embed/j6thhcW7tg4?si=R8mVVzoS8oIUV6mf",
  },
  {
    slug: "erhvervspartner",
    title: "Bliv erhvervspartner",
    image: "/img/erhvervspartner.webp",
    imagesingle: "",
    subtitle: "Støt foreningen Stop Spild Af Mad",
    textfield1:
      "Som erhvervspartner hos Stop Spild Af Mad er I med til at støtte foreningens arbejde i kampen mod madspild og bidrage til konkrete projekter og initiativer.",
    textfield2:
      "Erhvervspartnerskaberne er udviklet som en del af et større udviklingsprojekt støttet af Tuborgfondet.",
    textfield3:
      "Hvis I er interesseret i at høre mere om mulighederne for et erhvervspartnerskab, er I meget velkomne kan du kontakte os via telefon eller mail samt via linket nedenfor.",
    list: ["E-mail: info@stopspildafmad.org", "Telefon: +45 40 72 06 01"],
    id: "erhvervspartner",
    link: "/tilmeldt",
  },
  {
    slug: "spred-budskabet",
    title: "Spred budskabet",
    image: "/img/spred_budskab.webp",
    subtitle: "Bliv ambassadør i kampen mod madspild",
    textfield1:
      "Du kan vise, at du går forrest i kampen mod madspild og bakker op om bevægelsen på dine sociale medier som Instagram, Facebook, Twitter o.lign. ved at bruge vores officielle hashtag #stopspildafmad",
    textfield2:
      "Har du en blog, hvor du laver lækker restemad eller er med til at stoppe madspild på en anden måde, så henvis til Stop Spild Af Mad - så vil du have mulighed for at din blog bliver eksponeret på vores facebookside, som tæller over 60.000 mennesker.",
    id: "spred-budskabet",
    link: "/tilmeldt",
    mediaType: "iframe",
    mediaSrc: "https://www.youtube.com/embed/2gyjbKHhltI?si=_Up3HWlv5518zdpx",
  },
];

// getStaticPaths - bygger en side for hver slug
export function getStaticPaths() {
  return [
    { params: { slug: "frivillig" } },
    { params: { slug: "stoettemedlem" } },
    { params: { slug: "samarbejdspartner" } },
    { params: { slug: "erhvervspartner" } },
    { params: { slug: "spred-budskabet" } },
  ];
}

// Hent slug fra URL
const { slug } = Astro.params;

// Find det matchende card
const item = cards.find((card) => card.slug === slug);
---

<MainLayout title={item?.title || "Indhold findes ikke"}>
  <main class="container mx-auto p-4">
    {
      !item && (
        <div class="max-w-xl mx-auto text-center">
          <Heading htmlheading="h1" size="medium" stylingclasses="mb-4">
            Siden kunne ikke findes
          </Heading>

          <Text>
            Det indhold du leder efter findes ikke eller linket er forkert.
          </Text>

          <div class="mt-6">
            <Link href="/" variant="green">
              Tilbage til forsiden
            </Link>
          </div>
        </div>
      )
    }

    {
      item && (
        <>
          <div class="mb-6">
            <Link href="/bliv_aktiv" variant="textlink">
              ← Tilbage
            </Link>
          </div>

          <div class="mb-8 rounded-lg overflow-hidden shadow-lg">
            <img
              src={item.imagesingle}
              alt={item.title}
              class="w-full h-64 md:h-96 object-cover"
            />
          </div>

          <article class="max-w-3xl mx-auto">
            <Heading htmlheading="h1" size="large" stylingclasses="mb-4">
              {item.title}
            </Heading>

            {item.subtitle && (
              <Heading htmlheading="h2" size="small" stylingclasses="mb-6">
                {item.subtitle}
              </Heading>
            )}

            {item.textfield1 && (
              <Text stylingclasses="mb-4">{item.textfield1}</Text>
            )}

            {item.textfield2 && (
              <Text stylingclasses="mb-4">{item.textfield2}</Text>
            )}

            {item.textfield3 && (
              <Text stylingclasses="mb-6">{item.textfield3}</Text>
            )}

            {item.list && item.list.length > 0 && (
              <div class="my-8">
                <Heading htmlheading="h3" size="xsmall" stylingclasses="mb-4">
                  Vores kontaktinfo:
                </Heading>
                <ul class="list-disc pl-6 space-y-2">
                  {item.list.map((li) => (
                    <li>
                      <Text>{li}</Text>
                    </li>
                  ))}
                </ul>
                {item.link && (
                  <div class="mt-8 text-center">
                    <Link href={item.link} variant="green" size="large">
                      Tilmeld dig nu
                    </Link>
                  </div>
                )}
              </div>
            )}

            {item.mediaType && item.mediaSrc && (
              <div class="my-8">
                {item.mediaType === "video" && (
                  <video width="100%" height="auto" controls class="rounded-lg">
                    <source src={item.mediaSrc} type="video/mp4" />
                    Din browser understøtter ikke video afspilning.
                  </video>
                )}
                {item.mediaType === "image" && (
                  <img
                    src={item.mediaSrc}
                    alt={item.title}
                    class="w-full rounded-lg"
                  />
                )}
                {item.mediaType === "iframe" && (
                  <iframe
                    src={item.mediaSrc}
                    width="100%"
                    height="500"
                    class="rounded-lg"
                    frameborder="0"
                    allowfullscreen
                  />
                )}
              </div>
            )}
          </article>
        </>
      )
    }
  </main>
</MainLayout>
