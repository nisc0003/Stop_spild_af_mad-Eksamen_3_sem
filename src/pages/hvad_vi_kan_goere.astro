---
import MainLayout from "../layouts/MainLayout.astro";
import { Image } from "astro:assets";
import Heading from "../components/Heading.astro";
import Text from "../components/Text.astro";
import Button from "../components/Button.astro";
import Link from "../components/Link.astro";
import Card from "../components/Card.astro";
import Header from "../components/Header.astro";
import Articles from "../components/Articles.astro";
import Buttons2 from "../components/Buttons2.astro";
---

<!-- SM: er 640px i width -->
<MainLayout title="Vores mission">
  <section
    class="sm:flex-col flex lg:flex-row mr-section_right ml-section_left place-content-between top mb-section_buttom"
  >
    <Heading htmlheading="h2" size="medium" stylingclasses="mb-6">
      DELTAG I KAMPEN I MOD MADSPILD
    </Heading>

    <div class="flex flex-col gap-3 items-end">
      <div onclick="ScrollToTips()">
        <Link variant="orange"> LÆS OM VORES TIPS </Link>
      </div>
      <div onclick="ScrollToHistorie()">
        <Link> VORES HISTORIE </Link>
      </div>
    </div>
  </section>

  <section class="carousel">
    <div class="group">
      <!-- Forklar de andre hvad flex grow shrink og basis er -->
      <img
        src="/img/frugt1.webp"
        alt=""
        class="carousel_img grow-0 shrink-0 basis-5em"
      />
      <img
        src="/img/frugt2.webp"
        alt=""
        class="carousel_img grow-0 shrink-0 basis-5em"
      />
      <img
        src="/img/frugt3.webp"
        alt=""
        class="carousel_img grow-0 shrink-0 basis-5em"
      />
      <img
        src="/img/frugt4.webp"
        alt=""
        class="carousel_img grow-0 shrink-0 basis-5em"
      />
      <img
        src="/img/frugt5.webp"
        alt=""
        class="carousel_img grow-0 shrink-0 basis-5em"
      />
      <img
        src="/img/frugt6.webp"
        alt=""
        class="carousel_img grow-0 shrink-0 basis-5em"
      />
    </div>

    <div class="group">
      <img
        src="/img/frugt1.webp"
        alt=""
        class="carousel_img grow-0 shrink-0 basis-5em"
      />
      <img
        src="/img/frugt2.webp"
        alt=""
        class="carousel_img grow-0 shrink-0 basis-5em"
      />
      <img
        src="/img/frugt3.webp"
        alt=""
        class="carousel_img grow-0 shrink-0 basis-5em"
      />
      <img
        src="/img/frugt4.webp"
        alt=""
        class="carousel_img grow-0 shrink-0 basis-5em"
      />
      <img
        src="/img/frugt5.webp"
        alt=""
        class="carousel_img grow-0 shrink-0 basis-5em"
      />
      <img
        src="/img/frugt6.webp"
        alt=""
        class="carousel_img grow-0 shrink-0 basis-5em"
      />
    </div>
  </section>

  <section
    class="flex flex-col place-items-center mt-10 mb-50 animate-bounce animate-infinite animate-ease-in p-5 hover:cursor-pointer"
  >
    <img src="/img/arrow_d.svg" alt="" id="scrollDown" />
  </section>

  <section
    class="sm:flex flex-col lg:flex-row lg:mr-section_right lg:ml-section_left mb-section_buttom mt-section_top"
  >
    <img
      src="/img/food_bag.webp"
      alt=""
      class="sm:order-3 h-50 w-fit place-self-center lg:order-first lg:h-fit lg:w-fit"
    />

    <div class="flex flex-col place-content-between" id="tips">
      <Heading htmlheading="h2" size="medium" stylingclasses="mb-6">
        Hvad kan vi gøre?
      </Heading>

      <Text>
        Emner som disse kan virke store og uoverskuelige. Det kan være svært at
        vide hvor man skal starte, hvis man gerne vil hjælpe med at gøre en
        forskel. Derfor har vi her nogle simple vaner man kan indfører i
        hverdagen, som hjælper til med at mindske mængden af madspild:</Text
      >

      <div class="flex flex-col gap-5">
        <!-- <Button> KØB ENKELT VARE </Button> -->
        <div onclick="ScrollToTip1()" class="cursor-pointer">
          <Buttons2 variant="green"> KØB ENKELT VARE</Buttons2>
        </div>
        <div onclick="ScrollToTip2()" class="cursor-pointer">
          <Buttons2 variant="orange"> KØB IND MED OMTANKE</Buttons2>
        </div>
        <div onclick="ScrollToTip3()" class="cursor-pointer">
          <Buttons2 variant="purple"> DOGGY BAGS</Buttons2>
        </div>
        <!-- <Button> KØB IND MED OMTANKE </Button>
        <Button> DOGGY BAGS</Button> -->
      </div>
    </div>
  </section>

  <section
    class="sm:flex flex-col lg:flex lg:flex-row lg:mr-section_right lg:ml-section_left mb-section_buttom mt-section_top"
  >
    <div id="tip1">
      <Link variant="green-inverted" size="medium">Tip 1</Link>
      <Heading htmlheading="h2" size="medium" stylingclasses="mb-6">
        Fortsæt med at købe enkelt-varer
      </Heading>

      <div class="sm:flex flex-col gap-3 lg:hidden">
        <Text
          >I 2017 medvirkede Stop Spild Af Mad til at Rema 1000 droppede
          mængerabatter i alle kædens danske butikker.</Text
        >
        <Text
          >Mængden af madspild faldt her efter fra ca. 80-100 bananer blev smidt
          ud om dagen, til kun 10 bananer om dagen.
        </Text>
      </div>

      <div class="sm:hidden lg:flex lg:flex-col gap-3">
        <Text>
          I 2017 medvirkede Stop Spild Af Mad til at Rema 1000 droppede
          mængerabatter i alle kædens danske butikker.
        </Text>
        <Text>
          Mængden af madspild faldt her efter fra ca. 80-100 bananer blev smidt
          ud om dagen, til kun 10 bananer om dagen.
        </Text>
      </div>
    </div>

    <img src="/img/banan1.webp" alt="" class="sm:h-85 self-center lg:h-125" />
  </section>

  <section
    class="lg:mr-section_right lg:ml-section_left mb-section_buttom mt-section_top"
    id="tip2"
  >
    <Link variant="orange" size="medium">TIP 2</Link>
    <Heading htmlheading="h2" size="medium" stylingclasses="mb-6">
      Køb in med omtanke
    </Heading>

    <Text>I gennemsnittet ender vi med at smide 25% af maden vi køber ud.</Text>
    <Text
      >Det vil svare til at hver fjerede indkøbsvogn man ser i supermarkedet
      bliver smidt ud.</Text
    >

    <div class="staggeranimation flex flex-row justify-between" id="stagger">
      <img src="/img/cart.webp" alt="" class="sm:h-35 w-auto lg:h-50" />
      <img src="/img/cart.webp" alt="" class="sm:h-35 w-auto lg:h-50" />
      <img src="/img/cart.webp" alt="" class="sm:h-35 w-auto lg:h-50" />
      <img
        src="/img/cart.webp"
        alt=""
        class="grayscale sm:h-35 w-auto lg:h-50"
      />
    </div>
  </section>

  <section
    class="lg:grid lg:grid-cols-2 lg:grid-row-2 lg:mr-section_right lg:ml-section_left mb-section_buttom mt-section_top lg:gap-10"
    id="tip3"
  >
    <div class="lg:flex lg:flex-col lg:order-2 lg:col-start-2">
      <div class="lg:hidden">
        <Link variant="purple" size="medium">Tip 3</Link>
        <Heading htmlheading="h2" size="medium" stylingclasses="mb-6">
          Doggy Bags
        </Heading>
      </div>

      <div
        class="bg-[url('/img/star.svg')] bg-no-repeat bg-contain bg-center sm:h-100 w-auto place-content-center lg:h-185"
      >
        <img
          src="/img/doggy_bag.webp"
          alt=""
          class="sm:mx-auto h-75 w-auto lg:h-100"
        />
      </div>

      <div class="sm:flex flex-col gap-5 inline lg:hidden">
        <Text
          >I adskellige forskellige resturanter har vi samarbejdskab og har
          implimenteret vores Doggy bag!</Text
        >
        <Text
          >Hvis du ikke kan spise din mad færdig kan du spørge om en doggy bag
          og tage maden med hjem!</Text
        >
      </div>

      <div class="sm:flex flex-col gap-5 hidden lg:gap-2">
        <Text
          >I samarbejdskab med adskillige forskellige restauranter, har vi
          implementeret vores ‘doggy bag’!</Text
        >
        <Text
          >Hvis du ikke kan spise din mad færdig kan du spørge om en ‘doggy bag’
          og tage maden med hjem.</Text
        >
      </div>
    </div>

    <div
      class="sm:flex flex-col items-center gap-5 lg:items-baseline lg:order-1"
    >
      <div class="sm:hidden lg:inline">
        <Link variant="purple" size="medium">Tip 3</Link>
        <Heading htmlheading="h2" size="medium" stylingclasses="mb-6">
          Doggy Bags
        </Heading>
      </div>

      <div class="flex flex-col gap-5 lg:w-full h-full">
        <div id="mapContainer" class="map-container">
          <img
            src="/img/cph_map.webp"
            alt=""
            id="mapImage"
            class="map-image h-fit w-fit"
          />
        </div>
        <!-- <Button>SE RESTURANTER</Button> -->
        <div class="place-self-center">
          <Link href="/wip" variant="purple"> SE RESTURANTER </Link>
        </div>
      </div>
    </div>
  </section>

  <section
    class="mr-section_right ml-section_left max-w-585px place-items-center mb-section_buttom mt-section_top"
    id="historie"
  >
    <Heading htmlheading="h1" size="medium" stylingclasses="mb-6">
      VORES HISTORIE
    </Heading>
    <Text
      >Vi er meget stolte af hvor meget Stop Spild Af Mad har mulighed for at
      udrette.
      <br />
      Her er nogle af vores højdepunkter.</Text
    >
  </section>

  <section class="lg:mr-section_right lg:ml-section_left">
    <div
      class="tidslinje sm:flex sm:flex-col lg:flex-row lg:max-h-100 lg:w-auto"
    >
      <div
        class="sm:order-3 sm:w-full sm:overflow-hidden lg:order-1 lg:w-auto lg:max-h-100 lg:overflow-y-auto"
      >
        <ul
          class="sm:overflow-x-auto sm:overflow-y-hidden w-full sm:pr-55 lg:pr-0 sm:flex sm:flex-nowrap lg:flex-col gap-10"
        >
          <li class="li1 activeTime" id="li1"><h1>2008</h1></li>
          <li class="li2" id="li2"><h1>2010</h1></li>
          <li class="li3" id="li3"><h1>2011</h1></li>
          <li class="li4" id="li4"><h1>2013</h1></li>
          <li class="li5" id="li5"><h1>2014</h1></li>
          <li class="li6" id="li6"><h1>2016</h1></li>
          <li class="li7" id="li7"><h1>2019</h1></li>
          <li class="li8" id="li8"><h1>2024</h1></li>
        </ul>
        <!-- 
        <ul class="overflow-auto w-auto pr-25 sm:hidden lg:inline">
          <li class="li1 activeTime" id="li1"><h1>2008</h1></li>
          <li class="li2" id="li2"><h1>2009</h1></li>
          <li class="li3" id="li3"><h1>2010</h1></li>
          <li class="li4" id="li4"><h1>2011</h1></li>
          <li class="li5" id="li5"><h1>2012</h1></li>
        </ul> -->
      </div>
      <div class="sm:order-1 lg:order-3 flex flex-col lg:flex-1">
        <div
          class="flex sm:flex-col lg:flex-row li1_content gap-5"
          id="li1_content"
        >
          <img src="/img/2008.webp" alt="" />
          <div class="flex flex-col gap-5">
            <Heading>Begyndelsen</Heading>
            <Text>
              Stop Spild Af Mad blev stiftet af Selina Juul i 2008 som en
              facebook gruppe, men voksede hurtigt til en anderkendt frivilligt
              og selvstændigt non-profit. Selina Juul var motiveret af hendes
              fortid i Moskva, hvor hun oplevede stor fødevaremangel. Da hun kom
              til Danmark tog hun derfor kampen op i mod madspild.
            </Text>
          </div>
        </div>

        <div
          class="flex flex-row li2_content inactiveBox gap-5"
          id="li2_content"
        >
          <img src="/img/2010.webp" alt="" />
          <div class="flex flex-col gap-10">
            <Heading>Med fra start</Heading>
            <Text>
              I 2010 skrev Stop Spild Af Mad i Europa-Parlamentet sammen med
              flere europæiske organisationer under på Joint Declaration Against
              Food Waste, en europæisk erklæring med formål at reducere madspild
              med minimum 50% inden 2025. Erklæringen var med til at påvirke EU
              og FN.
            </Text>
          </div>
        </div>

        <div
          class="flex flex-row li3_content inactiveBox gap-5"
          id="li3_content"
        >
          <img src="/img/2011.webp" alt="" />
          <div class="flex flex-col gap-10">
            <Heading>Overskudsmad til udsatte</Heading>
            <Text>
              Siden 2011 har Stop Spild Af Mad, samarbejdspartnere og frivillige
              indsamlet og videreformidlet over 300 tons god gratis overskudsmad
              til herberger, væresteder, asylcentre, krisecentre, kvindehjem
              samt andre hjælpeorganisationer for hjemløse og socialt udsatte.
            </Text>
          </div>
        </div>

        <div class="flex flex-row li4_content inactiveBox" id="li4_content">
          <img src="/img/2013.webp" alt="" />

          <div class="flex flex-col gap-10">
            <Heading>Doggy bags</Heading>
            <Text>
              Siden 2013 har Stop Spild Af Mad og Unilever Food Solutions uddelt
              over 60.000 gratis doggybags til over 200 restauranter og
              spisesteder i hele landet. Analyse af TNS Gallup for Stop Spild Af
              Mad viser, at over halvdelen af danskere vil tage imod en
              doggybag.
            </Text>
          </div>
        </div>

        <div
          class="flex flex-row li5_content inactiveBox gap-5"
          id="li5_content"
        >
          <img src="/img/2014.webp" alt="" />
          <div class="flex flex-col gap-10">
            <Heading>Roskilde Festival</Heading>
            <Text>
              I 2014 har Stop Spild Af Mad, samarbejdspartnere og frivillige
              indsamlet og videreformidlet 27,5 tons god gratis overskudsmad fra
              Roskilde Festival til socialt udsatte. Indsatsen vandt den
              anerkendte internationale festivalpris Green Operations Award.
            </Text>
          </div>
        </div>

        <div
          class="flex flex-row li6_content inactiveBox gap-5"
          id="li6_content"
        >
          <img src="/img/2016.webp" alt="" />
          <div class="flex flex-col gap-10">
            <Heading>Officielt en forening</Heading>
            <Text>
              Den 16. november 2016 blev Stop Spild Af Mad formelt omdannet til
              en forening.
              <br />
              <br />
              Hendes Kongelige Højhed Prinsesse Marie har siden 2016 været samarbejdspartner
              til foreningen Stop Spild Af Mad.
            </Text>
          </div>
        </div>

        <div
          class="flex flex-row li7_content inactiveBox gap-5"
          id="li7_content"
        >
          <img src="/img/2019.webp" alt="" />
          <div class="flex flex-col gap-10">
            <Heading>Tedx Talks</Heading>
            <Text>
              Stifter Selina Juul fik i 2019 igen mulighed for at holde en Tedx
              Talk. Dette skabte både mulighed for at komme længere ud i verden
              med vores mission og værdier, og var med til at sætte Danmark på
              verdens kortet i kampen mod madspild.
              <br />
              <br />
              Hendes Kongelige Højhed Prinsesse Marie har siden 2016 været samarbejdspartner
              til foreningen Stop Spild Af Mad.
            </Text>
          </div>
        </div>

        <div
          class="flex flex-row li8_content inactiveBox gap-5"
          id="li8_content"
        >
          <img src="/img/2024.webp" alt="" />
          <div class="flex flex-col gap-10">
            <Heading>Kongelig Protektion</Heading>
            <Text>
              Stop Spild Af Mad har Hendes Kongelige Højhed Prinsesse Marie som
              protektor. Hendes Kongelige Højhed Prinsesse Marie blev protektor
              for foreningen Stop Spild Af Mad den 30. maj 2024.
            </Text>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section
    class="lg:mr-section_right lg:ml-section_left mb-section_buttom mt-section_top"
  >
    <Heading htmlheading="h1" size="medium" stylingclasses="mb-6">
      Vores TEDx Talks
    </Heading>

    <div class="active" id="vid2012">
      <video width="100%" controls>
        <source src="img/vids/TedX_2012.mp4" type="video/mp4" />
      </video>
    </div>

    <div class="inactive" id="vid2016">
      <video width="100%" controls>
        <source src="img/vids/TedX_2016.mp4" type="video/mp4" />
      </video>
    </div>

    <section class="grid grid-cols-2 gap-5 mt-5">
      <div
        id="2012_btn"
        class="hover:cursor-pointer bg-(--color-orange--100) hover:bg-(--color-orange--400) text-(--color-orange--400) hover:text-(--color-orange--100) transition-all duration-300 text-[2rem] rounded-(--radius-CTA) flex items-center justify-center"
      >
        <p>2012</p>
      </div>

      <div
        id="2016_btn"
        class="hover:cursor-pointer bg-(--color-orange--400) hover:bg-(--color-orange--100) text-(--color-orange--100) hover:text-(--color-orange--400) transition-all duration-300 text-[2rem] rounded-(--radius-CTA) flex items-center justify-center"
      >
        <p>2016</p>
      </div>

      <!-- <Buttons2 variant="orange" size="large" id="2012_btn"> 2012 </Buttons2> -->
      <!-- <Buttons2 variant="orange" size="large" id="2016_btn"> 2016 </Buttons2> -->
    </section>
  </section>

  <Articles />

  <div>
    <a
      href="#"
      id="scrollToTop"
      class="material-icons-outlined hover:cursor-pointer"
    >
      <Button variant="black">TILBAGE TIL TOPPEN</Button>
    </a>
  </div>
</MainLayout>

<style>
  .activeTime {
    color: purple;
    cursor: default;
  }

  .inactiveBox {
    display: none;
  }

  h1 {
    font-size: 4rem;
  }

  ul::-webkit-scrollbar {
    display: none;
  }

  ul {
    -ms-overflow-style: none;
    scrollbar-width: none;
    scroll-behavior: smooth;
  }

  li {
    cursor: pointer;

    h1 {
      font-size: 5rem;
    }
  }

  .active {
    display: block;
  }

  .inactive {
    display: none;
  }

  .carousel {
    display: flex;
    overflow-x: auto;
  }

  .carousel::-webkit-scrollbar {
    display: none;
  }

  .group {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1em;
    animation: spin 20s infinite linear;
    padding-right: 1em;
  }

  .carousel_img {
    flex: 0 0 5em;
    align-content: center;
    padding: 1em;
  }

  @keyframes spin {
    from {
      translate: 0;
    }
    to {
      translate: -100%;
    }
  }

  #scrollToTop {
    animation-timeline: scroll(y);
    scroll-behavior: smooth;

    display: flex;
    align-items: center;
    justify-content: center;
  }

  .map-container {
    position: relative;
    width: 100%;
    height: 100%;
    overflow: hidden;
    cursor: grab;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .map-container.dragging {
    cursor: grabbing;
  }

  .map-image {
    width: 100%;
    height: 100%;
    object-fit: contain;
    user-select: none;
    transform: scale(3);
    transform-origin: center;
    flex-shrink: 0;
  }
</style>

<script is:inline>
  // function ScrollToTips() {
  //   document.getElementById("tips").scrollIntoView({ behavior: "smooth" });
  // }

  function ScrollToTips() {
    document.getElementById("tips").scrollIntoView({ behavior: "smooth" });
  }

  function ScrollToHistorie() {
    document.getElementById("historie").scrollIntoView({ behavior: "smooth" });
  }

  function ScrollToTip1() {
    document.getElementById("tip1").scrollIntoView({ behavior: "smooth" });
  }

  function ScrollToTip2() {
    document.getElementById("tip2").scrollIntoView({ behavior: "smooth" });
  }

  function ScrollToTip3() {
    document.getElementById("tip3").scrollIntoView({ behavior: "smooth" });
  }

  document.addEventListener("DOMContentLoaded", function () {
    // TEDx Talk JS
    const btn2012 = document.getElementById("2012_btn");
    const btn2016 = document.getElementById("2016_btn");
    const vid2012 = document.getElementById("vid2012");
    const vid2016 = document.getElementById("vid2016");

    btn2016.addEventListener("click", () => {
      vid2016.classList.remove("inactive");
      vid2016.classList.add("active");
      vid2012.classList.remove("active");
      vid2012.classList.add("inactive");

      btn2016.classList.remove("bg-(--color-orange--400)");
      btn2016.classList.add("bg-(--color-orange--100)");
      btn2016.classList.remove("text-(--color-orange--100))");
      btn2016.classList.add("text-(--color-orange--400)");

      btn2012.classList.add("bg-(--color-orange--400)");
      btn2012.classList.remove("bg-(--color-orange--100)");
      btn2012.classList.add("text-(--color-orange--100))");
      btn2012.classList.remove("text-(--color-orange--400)");
    });

    btn2012.addEventListener("click", () => {
      vid2012.classList.remove("inactive");
      vid2012.classList.add("active");
      vid2016.classList.remove("active");
      vid2016.classList.add("inactive");

      btn2012.classList.remove("bg-(--color-orange--400)");
      btn2012.classList.add("bg-(--color-orange--100)");
      btn2012.classList.remove("text-(--color-orange--100))");
      btn2012.classList.add("text-(--color-orange--400)");

      btn2016.classList.add("bg-(--color-orange--400)");
      btn2016.classList.remove("bg-(--color-orange--100)");
      btn2016.classList.add("text-(--color-orange--100))");
      btn2016.classList.remove("text-(--color-orange--400)");
    });

    // Scroll to top
    const scrollToTopBtn = document.getElementById("scrollToTop");
    if (scrollToTopBtn) {
      scrollToTopBtn.addEventListener("click", function (e) {
        e.preventDefault();
        window.scrollTo({
          top: 0,
          behavior: "smooth",
        });
      });
    }

    // Scroll down :3
    const scrollDown = document.getElementById("scrollDown");
    if (scrollDown) {
      scrollDown.addEventListener("click", function (e) {
        e.preventDefault();
        window.scrollTo({
          top: 750,
          behavior: "smooth",
        });
      });
    }

    // Stagger animation for cart images - Simple vanilla JS version
    function initStaggerAnimation() {
      const staggerContainer = document.getElementById("stagger");
      if (!staggerContainer) {
        console.warn("Stagger container not found");
        return;
      }

      const images = staggerContainer.querySelectorAll("img");
      if (images.length === 0) {
        console.warn("No images found in stagger container");
        return;
      }

      // Set initial opacity to 0
      images.forEach((img) => {
        img.style.opacity = "0";
        img.style.transition = "opacity 0.6s ease-in-out";
      });

      // Use Intersection Observer to trigger animation when element is in view
      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              // Animate images with stagger effect
              images.forEach((img, index) => {
                setTimeout(() => {
                  img.style.opacity = "1";
                }, index * 150); // 150ms delay between each image
              });
              observer.unobserve(staggerContainer);
            }
          });
        },
        { threshold: 0.1 },
      );

      observer.observe(staggerContainer);
    }

    // Initialize stagger animation
    initStaggerAnimation();

    // ===== DRAGGABLE MAP =====
    const mapContainer = document.getElementById("mapContainer");
    const mapImage = document.getElementById("mapImage");

    if (mapContainer && mapImage) {
      let isDragging = false;
      let startX = 0;
      let startY = 0;
      let offsetX = 0;
      let offsetY = 0;
      const scale = 3;

      // Calculate maximum allowed offset
      const updateBounds = () => {
        const containerRect = mapContainer.getBoundingClientRect();
        const imageWidth = mapImage.offsetWidth * scale;
        const imageHeight = mapImage.offsetHeight * scale;

        window.maxOffsetX = (imageWidth - containerRect.width) / 2 / scale;
        window.maxOffsetY = (imageHeight - containerRect.height) / 2 / scale;
      };

      mapImage.addEventListener("load", updateBounds);
      setTimeout(updateBounds, 100);
      window.addEventListener("resize", updateBounds);

      mapContainer.addEventListener("mousedown", (e) => {
        isDragging = true;
        startX = e.clientX;
        startY = e.clientY;
        mapContainer.classList.add("dragging");
      });

      document.addEventListener("mousemove", (e) => {
        if (!isDragging) return;

        const deltaX = e.clientX - startX;
        const deltaY = e.clientY - startY;

        offsetX += deltaX;
        offsetY += deltaY;

        // Clamp offsets to prevent dragging out of bounds
        offsetX = Math.max(
          -window.maxOffsetX,
          Math.min(window.maxOffsetX, offsetX),
        );
        offsetY = Math.max(
          -window.maxOffsetY,
          Math.min(window.maxOffsetY, offsetY),
        );

        mapImage.style.transform = `scale(${scale}) translate(${offsetX}px, ${offsetY}px)`;

        startX = e.clientX;
        startY = e.clientY;
      });

      document.addEventListener("mouseup", () => {
        isDragging = false;
        mapContainer.classList.remove("dragging");
      });

      // Prevent text selection while dragging
      mapContainer.addEventListener("selectstart", (e) => {
        if (isDragging) e.preventDefault();
      });
    }

    // ===== TIDSLINJE (TIMELINE) JAVASCRIPT =====
    // This section handles the interactive timeline where users can click on years (2008-2015)
    // to switch between different content boxes showing historical events

    // Create arrays for years and their corresponding content boxes
    const timelineItems = [];
    for (let i = 1; i <= 8; i++) {
      const listElement = document.getElementById(`li${i}`);
      const contentElement = document.getElementById(`li${i}_content`);
      if (listElement && contentElement) {
        timelineItems.push({ list: listElement, box: contentElement });
      }
    }

    // Generic function to handle timeline year clicks
    function activateTimelineYear(activeIndex) {
      timelineItems.forEach((item, index) => {
        if (index === activeIndex) {
          // Activate this year
          item.list.classList.add("activeTime");
          item.box.classList.remove("inactiveBox");
        } else {
          // Deactivate all other years
          item.list.classList.remove("activeTime");
          item.box.classList.add("inactiveBox");
        }
      });
    }

    // Add click listeners to all timeline items
    timelineItems.forEach((item, index) => {
      item.list.addEventListener("click", () => {
        activateTimelineYear(index);
      });
    });
  });
</script>
